#!/usr/bin/env sh

echo "🔍 Running pre-push checks (matching CI static analysis)..."

# Run all static analysis checks that match the CI workflow
echo "🚀 Running comprehensive static analysis..."
npm run check:all
check_exit_code=$?

# Check if any issues were found
if [ $check_exit_code -ne 0 ]; then
    echo ""
    echo "❌ Static analysis checks failed! Please fix issues before pushing."
    echo ""
    echo "To fix issues, run:"
    echo "  npm run frontend:lint        # Check frontend linting"
    echo "  npm run frontend:format      # Fix frontend formatting"
    echo "  npm run backend:format       # Fix backend formatting"
    echo "  npm run backend:check:type-safety  # Check backend types"
    echo "  npm run yaml:check:format    # Check YAML formatting"
    echo ""
    exit 1
fi

echo "✅ All static analysis checks passed!"
