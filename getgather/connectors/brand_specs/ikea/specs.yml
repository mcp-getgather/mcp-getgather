name: Ikea

signin:
  fields:
    - name: email
      type: email
      prompt: Email
      selector: input#username
    - name: continue
      type: click
      prompt: Continue
      selector: button[type=submit]
      expect_nav: true
    - name: otp
      type: text
      prompt: OTP
      selector: input#otc-verification
    - name: wait_otp
      type: wait
      selector: input#otc-verification
    - name: submit
      type: click
      prompt: Submit
      selector: button[type=submit]
      expect_nav: true
    - name: otp_error
      type: message
      selector: span.form-field__message
      label: span.form-field__message
      prompt: ‚ùå We do not recognize this verification code. Please try again.

  pages:
    - name: Login page
      fields: [email, continue]
    - name: OTP page
      fields:
        required: [wait_otp, otp, submit]
        optional: [otp_error]
    - name: Homepage
      url: https://www.ikea.com/us/en/favorites/
      end: true

  start: https://www.ikea.com/us/en/profile/login/?from=https%3A%2F%2Fwww.ikea.com%2Fus%2Fen%2Ffavourites%2F
