name: Kindle
signin:
  fields:
    - name: email
      type: text
      prompt: Email
      selector: input#ap_email
    - name: password
      type: password
      prompt: Password
      selector: input#ap_password
    - name: sign_in
      type: click
      prompt: Sign In
      selector: input#signInSubmit
    - name: content_page_title
      type: wait
      selector: div#content-page-title
    - name: otp
      type: text
      prompt: OTP
      label: h1:has-text("Two-Step Verification") + p
      selector: input[id="auth-mfa-otpcode"]

    - name: otp_submit
      type: click
      prompt: Submit
      selector: input[id="auth-signin-button"]

  pages:
    - name: Sign in page
      fields: [email, password, sign_in]
    - name: OTP page
      fields: [otp, otp_submit]
    - name: Content page
      fields: [content_page_title]
      end: true
  start: https://www.amazon.com/hz/mycd/digital-console/contentlist/booksAll/dateDsc/
