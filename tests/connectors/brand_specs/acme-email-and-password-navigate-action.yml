# This is to test the specific case where we need to navigate to a different page after signing in to verify
# the signin was successful.

name: ACME

signin:
  fields:
    - name: email
      type: text
      prompt: Please enter your email address
      selector: input[type=email]
    - name: password
      type: password
      prompt: Please enter your password
      selector: input[type=password]
    - name: submit
      type: click
      selector: form button[type=submit]
      prompt: Submit
    - name: wait_for_sign_in
      type: wait
      selector: p:has-text("Welcome")
    - name: navigate_to_verify
      type: navigate
      prompt: Navigate to verify
      url: http://localhost:5001/verify
      expect_nav: true
    - name: account_verified
      type: wait
      selector: p:has-text("Account verified")
  pages:
    - name: Log in to ACME Corp
      url: http://localhost:5001/auth/email-and-password
      fields: [email, password, submit]

    - name: Navigate to the next page
      url: http://localhost:5001/submit/email-and-password
      fields: [navigate_to_verify]

    - name: Wait for the account verification page to load
      fields: [account_verified]
      end: true
  start: Log in to ACME Corp
