name: ACME

signin:
  fields:
    - name: trigger_overlay
      type: click
      prompt: Trigger overlay
      selector: button[onclick="toggleOverlay()"]
    - name: email
      type: text
      prompt: Please enter your email address
      selector: .overlay-form input[type=email]
    - name: password
      type: password
      prompt: Please enter your password
      selector: .overlay-form input[type=password]
    - name: lastname
      type: text
      prompt: Please enter your last name
      selector: .overlay-form input[name=lastname]
    - name: submit
      type: click
      selector: .overlay-form button[type=submit]
      prompt: Submit
      expect_nav: true
    - name: home_page
      type: wait
      selector: p:has-text("Welcome")
    - name: overlay_active
      type: wait
      selector: .overlay.active
  pages:
    - name: Navigate to ACME Corp overlay login
      url: http://localhost:5001/auth/email-password-lastname-overlay
      fields: [trigger_overlay]

    - name: Wait for overlay and fill in credentials
      fields: [overlay_active, email]

    - name: Fill last name
      fields: [lastname, password, submit]

    - name: Wait for sign-in to complete
      fields: [home_page]
      end: true
  start: Navigate to ACME Corp overlay login
